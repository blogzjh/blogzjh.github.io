<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>疫情港口挂靠数ARIMA时序分析 | 张家豪的博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="摘  要  新冠肺炎疫情自 2020 年年初爆发以来，传播速度快、传染范围广，截止至 2021 年 3 月底已经造成了 1 亿 2 千多万人感染。对全球各行各业都带来了无法忽视的影响，同时无疑是给世界贸易经济一击重创。而海上运输作为全世界货物流通的最主要运输方式，新冠疫情对航运业的影响是非常明显的。  全文研究的是新冠肺炎疫情对集装箱运输市场的影响。首先简述了新冠病毒在全球的扩散范围，简单讲述了">
<meta property="og:type" content="article">
<meta property="og:title" content="疫情港口挂靠数ARIMA时序分析">
<meta property="og:url" content="https://blogzjh.github.io/2022/07/17/%E7%96%AB%E6%83%85%E6%B8%AF%E5%8F%A3%E6%8C%82%E9%9D%A0%E6%95%B0ARIMA%E6%97%B6%E5%BA%8F%E5%88%86%E6%9E%90/index.html">
<meta property="og:site_name" content="张家豪的博客">
<meta property="og:description" content="摘  要  新冠肺炎疫情自 2020 年年初爆发以来，传播速度快、传染范围广，截止至 2021 年 3 月底已经造成了 1 亿 2 千多万人感染。对全球各行各业都带来了无法忽视的影响，同时无疑是给世界贸易经济一击重创。而海上运输作为全世界货物流通的最主要运输方式，新冠疫情对航运业的影响是非常明显的。  全文研究的是新冠肺炎疫情对集装箱运输市场的影响。首先简述了新冠病毒在全球的扩散范围，简单讲述了">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://img-blog.csdnimg.cn/e2059db4feae44d3bf1328329751966a.png">
<meta property="og:image" content="https://img-blog.csdnimg.cn/18cd0ab2e9004651a2e4cf1480be700e.png">
<meta property="og:image" content="https://img-blog.csdnimg.cn/6cb324c779504719bfd0cc94748381ba.png">
<meta property="og:image" content="https://img-blog.csdnimg.cn/d2759f31845d4d2ba70248ad6cf498ba.png">
<meta property="og:image" content="https://img-blog.csdnimg.cn/1f584fac2aa74af9988d48fe747d2955.png">
<meta property="og:image" content="https://img-blog.csdnimg.cn/680b3f6021cd46e9a346ea3e58e14407.png">
<meta property="og:image" content="https://img-blog.csdnimg.cn/019adfcce47e4f549469841c9b906588.png">
<meta property="og:image" content="https://img-blog.csdnimg.cn/cf8c1c5dff3b41ee9664b87099ed462e.png">
<meta property="og:image" content="https://img-blog.csdnimg.cn/2884f522eca04d32a3c016a8d5ca77f2.png">
<meta property="og:image" content="https://img-blog.csdnimg.cn/c3289c4856f84523bb56e13c4639ef04.png">
<meta property="article:published_time" content="2022-07-17T03:21:13.000Z">
<meta property="article:modified_time" content="2022-07-17T03:23:34.699Z">
<meta property="article:author" content="张家豪">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://img-blog.csdnimg.cn/e2059db4feae44d3bf1328329751966a.png">
  
    <link rel="alternate" href="/atom.xml" title="张家豪的博客" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 5.4.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">张家豪的博客</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://blogzjh.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-疫情港口挂靠数ARIMA时序分析" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/07/17/%E7%96%AB%E6%83%85%E6%B8%AF%E5%8F%A3%E6%8C%82%E9%9D%A0%E6%95%B0ARIMA%E6%97%B6%E5%BA%8F%E5%88%86%E6%9E%90/" class="article-date">
  <time datetime="2022-07-17T03:21:13.000Z" itemprop="datePublished">2022-07-17</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/">机器学习</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      疫情港口挂靠数ARIMA时序分析
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="摘-要"><a href="#摘-要" class="headerlink" title="摘  要"></a>摘  要</h1><ul>
<li> 新冠肺炎疫情自 2020 年年初爆发以来，传播速度快、传染范围广，截止至 2021 年 3 月底已经造成了 1 亿 2 千多万人感染。对全球各行各业都带来了无法忽视的影响，同时无疑是给世界贸易经济一击重创。而海上运输作为全世界货物流通的最主要运输方式，新冠疫情对航运业的影响是非常明显的。</li>
<li> 全文研究的是新冠肺炎疫情对集装箱运输市场的影响。首先简述了新冠病毒在全球的扩散范围，简单讲述了 ARIMA 模型建模方法，再分析可能疫情对集装箱市场的影响因素，利用一阶差分得到平稳数据，白噪声检验验证是否是随机序列，利用 ACF 和 PACF 检验在置信区间中选择出合适的 p、 q 值，配合一阶差分的参数 1 进行建模， 建模之后使用 AIC 准则评估模型，残差检验白噪声，用模型预测测试集，最终分析，总结。 </li>
<li>*关键词**：新冠肺炎疫情；集装箱供需变化；ARIMA； </li>
</ul>
<ol>
<li>绪论……………………………………………………………………………………………………………………………………. 4</li>
<li>1 选题背景………………………………………………………………………………………………………………………… 4</li>
<li>2 国内外研究现状 …………………………………………………………………………………………………………….. 4</li>
<li>疫情对国际集装箱运输的影响波动………………………………………………………………………………. 5</li>
<li>ARIMA 模型概述………………………………………………………………………………………………………………. 6</li>
<li>建立 ARIMA 模型的步骤…………………………………………………………………………………………………. 7</li>
<li>1 时间序列的获取 …………………………………………………………………………………………………………….. 7</li>
<li>2 时间序列的预处理…………………………………………………………………………………………………………. 7</li>
<li>2.1 预处理………………………………………………………………………………………………………………………. 7</li>
<li>2.2 差分得到平稳数据………………………………………………………………………………………………….. 8</li>
<li>2.3 验证是否随机序列………………………………………………………………………………………………….. 8</li>
<li>3ACF 和 PACF 检验…………………………………………………………………………………………………………… 8</li>
<li>4AIC 准则 …………………………………………………………………………………………………………………………… 9</li>
<li>5 模型评估………………………………………………………………………………………………………………………..10</li>
<li>6 残差检验………………………………………………………………………………………………………………………..11</li>
<li>7 模型预测………………………………………………………………………………………………………………………..12</li>
<li>8 结果可视化…………………………………………………………………………………………………………………….13</li>
<li>9 结果分析………………………………………………………………………………………………………………………..13</li>
<li>结论与展望………………………………………………………………………………………………………………………15</li>
<li>参考文献…………………………………………………………………………………………………………………………..16</li>
</ol>
<h1 id="1-绪论"><a href="#1-绪论" class="headerlink" title="1. 绪论"></a>1. 绪论</h1><p>2020 年新年伊始，新冠疫情爆发，在这次冲击下,航运市场整体处于低迷状态，燃油价格、集装箱船队每周平均闲置运力受到明显影响，同时还加剧了集装箱港口的拥堵程度。一项由 11 条分航线指数组成，这些全球重要航线的集装箱运价指数组成了代表国际集装箱运输市场价格走势的重要指标之一——中国出口集装箱运价指数(Chinese Container FreightIndex,CCFI)，能够客观地反映集装箱市场状况。本文通过收集了 2020 年 1 月至 2021 年 3 月<br>的中国集装箱出口运价指数来研究疫情期间集装箱挂靠数的变化情况以及影响因素在航运企业角度，提出规避风险的有效措施。</p>
<h2 id="1-1选题背景"><a href="#1-1选题背景" class="headerlink" title="1.1选题背景"></a>1.1选题背景</h2><ul>
<li>航运是全球贸易的大动脉，是世界经济的“晴雨表”，具有成本低、覆盖面广、量大等优势。当中国航运能够在世界舞台上脱颖而出，影响着、并改变着世界。航运需求作为一种派生需求，它是随着全球贸易的发展和货物的海上流通应运而生的，为国际的贸易提供运输服务，因此航运业的发展与全球经济贸易的发展息息相关。集装箱市场作为国际航运市场的重要组成部分，由于货物种类繁多，同时还受到经济发展程度不同、世界政治环境、经济环境和产业结构等等众多因素的影响。</li>
<li>集装箱运输船的供给是缺乏弹性的。中国出口集装箱运价指数能够直接衡量运力需求和集装箱船供给之间的关系，当运力需求上升时，航运企业此时就会选择采购建造新船，而造船耗时长，成本高，若船造好后赶上运力需求下降，则造好的船只能搁置，一条船的搁置成本很高，然而航运公司并不能通过短期搁置部分船只来暂时减少运力来紧密跟踪市场需求。基于以上原因，在航运业中，当运输能力的供求达到平衡状态时，即使需求有一个细微的正<br>边际增长，也会迅速推高货运指数;相反，一个微小的负边际增量会导致这些指数的暴跌。供给端收缩促进了当前集运行业的复苏，复苏的力度取决于需求，如果需求保持稳定，复苏将是相对温和的；如果需求增长超出预期，将带来强劲的复苏。其中，中国的出口是影响海洋运输需求的重要因素，而中国的进口是影响干散货需求的重要因素。 2020 年底，中国进出口数据超过预期。如果这一趋势能够保持下去，将为航运业的复苏形成强有力的支撑。</li>
</ul>
<h2 id="1-2国内外研究现状"><a href="#1-2国内外研究现状" class="headerlink" title="1.2国内外研究现状"></a>1.2国内外研究现状</h2><ul>
<li>新冠疫情爆发以来，国内外集装箱运输市场纷纷展现出集装箱空箱运输困难、难以周转、多数船舶停航延期、港口拥堵严重、人员调度困难以及运费持续上涨等负面因素，导致全球航运供应链滞塞。通过分析新冠疫情在全球的扩散范围内对集装箱市场的供需两方面影响因素，能够得出燃油价格、集装箱船队每周平均闲置运力和集装箱港口拥堵程度对中国出口集装箱运价指数影响明显，而随着疫情得到有效控制，出口集装箱运价指数在 2020 年底激增并持续较长时间。</li>
<li>航运作为全球贸易流通的命脉，不少专业机构和专家对疫情下的航运变化展开过研究：2020 年底，海事咨询机构——Sea Intelligence，公布了全球海运运输量的相关数据并加以分析，得出结论，在 2020 年上半年，由于疫情影响，全球海运两总体下降了 25%， 2020 年全年整体下降 10%。截止至 2020 年 9 月底，全球主要挂靠港的集装箱运转量多数显示负增长，但是，在中国，以宁波舟山港为主的集装箱吞吐量却保持不同程度的增长，反映出了中国国内市场的经济恢复较好。</li>
<li>2020 年交通运输部科学研究院刘宏甲院士、周健院士于交通统计信息与经济运行分析技术实验室发表了《新冠肺炎疫情对水路运价的影响研究及展望》，报告中将此次疫情和SARS 病毒对比，发现新冠比 SARS 对我国航运业产生的影响更严重，表现在了全国居家隔离，小型企业停产甚至倒闭，使的原材料和产品贸易量减少；与此同时，人员返岗困难，导致港口操作人员紧缺。船舶的停泊时间增加。中远海运散货运输有限公司的王婧妍发表了《浅析新冠疫情的世界性爆发对航运业的影响》，该文章指出疫情带来的影响主要展现在了船舶进出港口、航运企业业务运营以及人力资源方面，航运企业还需要在未来的日子里研究初疫情影响运价的机制，采取有力措施来规避运价大幅度波动的影响。</li>
<li>目前相关数据研究表明， 2020 年中国各港口吞吐量在 1 至 3 月份明显下滑，由于 4 月起国内疫情得到较好的控制，直到 2020 年末，疫情在国外爆发，而中国得到了很好的控制，我国开始大量的出口医疗设施设备，国外船舶选择中国中转，从而促使了中国的出口市场发展向好。</li>
</ul>
<h1 id="2-疫情对国际集装箱运输影响波动"><a href="#2-疫情对国际集装箱运输影响波动" class="headerlink" title="2.疫情对国际集装箱运输影响波动"></a>2.疫情对国际集装箱运输影响波动</h1><ul>
<li>中国出口集装箱数主要收到直接间接两个方面因素的影响，直接影响因素有：供需变化、运输成本变化以及国家调控。而间接影响因素主要有：市场结构、全球经济、国际政治变化以及自然灾害等突发之间因素。而 2020 年突发的新型冠状肺炎疫情正是属于突发自然灾害因素，同时，也在不同程度上波及到了除此之外的其他因素。</li>
<li>需求首先下降，然后上升，而价格迅速上涨。到 2020 年，全球集装箱运输市场的需求量将先减少后增加。</li>
</ul>
<ul>
<li><p>中国出口集装箱运输市场在第一季度呈下降趋势，在第二季度末稳步反弹，并在第三和第四季度加速上升趋势。自 6 月以来，对集装箱运输的需求迅速恢复，船舶和集装箱在某些路线上开始紧缺，市场逐渐接近卖方市场。即使在第四季度，西方国家对运输的需求仍然很高，国外的流行病导致港口拥挤，收集和交付系统不足，这降低了船舶的运营效率，使返回空集装箱的工作变得困难。 2020 年我国出口集装箱运输指数平均水平为 984.42 点，比上年增长 19.5％。</p>
</li>
<li><p>由于疫情爆发时许多国家施加的限制和严格控制，国际贸易下降，对国际运输的需求也下降。因此，在冠状肺炎的全球大规模流行的情况下，航运企业将需要对当前环境进行透彻的分析，积极应对并向前迈进。疫情直接导致韩滚需求先降后升，而整个物流供应链的成本增加了，伴随着增加了额外的运输和劳动力成本，加上由于大量集装箱船舶长期闲置搁浅，短期内国内外集装箱船舶的运力过剩，还是给航运企业经营带来较大困难。</p>
</li>
<li><p>供应链的成本增加了。由于新冠疫情，集装箱运输链上的压力越来越大，面临着提供门到门运输的多式联运和综合物流服务提供商。运价成本费用的增加主要反映在以下因素上：其中之一是货运量的增加。其次，由于路线的缩短，运输承运人的成本将增加。此外，根据国际海事组织的有关规定，今年船运公司将开始平均每个集装箱低硫燃料附加费 100-200 美元。第三是预防传染病的材料成本。第四，由于集装箱运输不畅造成的滞期成本。 第五，人工成本增加。第六，集装箱储存成本集装箱航线正在缓慢恢复。自疫情爆发以来，春节期间的贸易量有所下降，航运公司也计划停航。受疫情影响，取消航班较去年同期明显增加。目前，国内沿江航线运力已陆续恢复，与往年相比，春节淡季捉襟见肘，迟迟未能恢复出货。虽然航道正在恢复，但船舶的装货率已经下降。大量集装箱船长期搁浅。这一传染病增加了额外的运输和劳动力成本。短期内，国内外集装箱船舶运力过剩，给航运企业经营带来较大困难。</p>
</li>
<li><p>第一季度，中国出口集装箱运输市场行情总体呈下行态势，第二季度末企稳回升，第三、四季度加速上行。自 6 月份开始，集装箱运输需求快速恢复，部分航线开始出现缺船缺箱局面，市场逐渐转向卖方市场。进入第四季度，多数航线现货市场运价进入直线上升阶段。新冠肺炎影响的知识中国经济发展的节奏，中国经济具有实力大、动力足、强力强，发展空间大的特征。疫情发生以来，中国人的消费方式加快了转变，而居家办公也突破了传统的办公方式，客观地来讲，疫情推动航运企业数字化转型，加快了数字化创新的进程。在国际贸易中货物贸易的占比比起服务贸易明显高出许多，此次疫情市场上的生产要素向高端服务转移，大力发展服务贸易的契机。</p>
</li>
</ul>
<h1 id="3-ARIMA模型概述"><a href="#3-ARIMA模型概述" class="headerlink" title="3.ARIMA模型概述"></a>3.ARIMA模型概述</h1><ul>
<li><p>ARIMA 模型（英语： Autoregressive Integrated Moving Average model），差分整合移动平均自回归模型，又称整合移动平均自回归模型（移动也可称作滑动），是时间序列预测分析方法之一。 ARIMA(p， d， q)中， AR 是“自回归”， p 为自回归项数； MA 为“滑动平均”，q 为滑动平均项数， d 为使之成为平稳序列所做的差分次数（阶数）。 “差分”一词虽未出现在ARIMA 的英文名称中，却是关键步骤。</p>
</li>
<li><p>对时间序列数据进行分析和预测比较完善和精确的算法是博克思-詹金斯<br>(Box-Jenkins)方法，其常用模型包括：自回归模型（AR 模型）、滑动平均模型（MA 模型）、（自回归-滑动平均混合模型） ARMA 模型、（差分整合移动平均自回归模型） ARIMA 模型。ARIMA(p， d， q)模型是 ARMA(p， q)模型的扩展。 ARIMA(p， d， q)模型可以表示为：<img src="https://img-blog.csdnimg.cn/e2059db4feae44d3bf1328329751966a.png"></p>
</li>
</ul>
<h1 id="4-建立ARIMA模型的步骤"><a href="#4-建立ARIMA模型的步骤" class="headerlink" title="4.建立ARIMA模型的步骤"></a>4.建立ARIMA模型的步骤</h1><h2 id="4-1时间序列的预处理"><a href="#4-1时间序列的预处理" class="headerlink" title="4.1时间序列的预处理"></a>4.1时间序列的预处理</h2><ul>
<li>时间序列的预处理包括两个方面的检验，平稳性检验和白噪声检验。能够适用 ARMA 模型进行分析预测的时间序列必须满足的条件是<strong>平稳非白噪声序列</strong>。</li>
<li>差分的次数就是模型 ARIMA(p,d,q)的阶数，理论上说，差分的次数越多，对时序信息的非平稳确定性信息的提取越充分，但是从理论上说，差分的次数并非越多越好，<strong>每一次差分运算，都会造成信息的损失</strong>，所以应当避免过分的差分，一般在应用中，差分的阶数不超过 2</li>
</ul>
<h3 id="4-1-1预处理"><a href="#4-1-1预处理" class="headerlink" title="4.1.1预处理"></a>4.1.1预处理</h3><pre><code>#导入 python 相关模块
import warnings warnings.filterwarnings(&quot;ignore&quot;)
import numpy as np
import pandas as pd
import matplotlib.pyplot as plt
import statsmodels.api as sm
import statsmodels.tsa.stattools as ts from statsmodels.graphics.api
import qqplot from sklearn
import preprocessing from sklearn.metrics
import mean_squared_error

#使用 read_csv 方法读取数据集中，列名为‘value’的数据序列
train=pd.read_csv(&#39;C:/Users/user/Desktop/ 港 口 靠 挂 数 .csv&#39;, header=0,
parse_dates=[0], index_col=0, squeeze=True)
#做 adf 单位根检验
result = ts.adfuller(train)
print(result)
</code></pre>
<p>(-1.6084751426812451, 0.47933490167167303, 18, 426, {‘1%’: -3.4457939940402107,’5%’: -2.8683485906158963, ‘10%’: -2.570396746236417}, 3355.7564277245247)</p>
<p><strong>结果分析</strong>： adf 单位根检验结果可知， t 统计量不显著大于 1%， 5%， 10%，且 p_value 值显著大于 0.05，因此此时间序列不是平稳序列，需要做一阶差分处理。</p>
<h3 id="4-1-2差分得到平稳数据"><a href="#4-1-2差分得到平稳数据" class="headerlink" title="4.1.2差分得到平稳数据"></a>4.1.2差分得到平稳数据</h3><pre><code>#因为原数据不平稳，因此做一阶差分
train_diff1=train.diff(1).dropna()
result = ts.adfuller(train_diff1)
print(result) #得出一阶差分后，发现平稳
</code></pre>
<p>(-10.251689978153886, 4.468421753473792e-18, 15, 427, {‘1%’: -<br>3.445757604526768, ‘5%’: -2.8683325885102855, ‘10%’: -2.5703882165206853},3361.719726005615)</p>
<p><strong>结果分析</strong>：数据经过一阶差分之后，再经过 adf 单位根检验结果可知， t 统计量显著小于 1%，5%， 10%，且 p_value 值显著小于 0.05，因此差分后的数据是平稳的，即可进行下一步操作。</p>
<h3 id="4-1-3验证是否随机序列"><a href="#4-1-3验证是否随机序列" class="headerlink" title="4.1.3验证是否随机序列"></a>4.1.3验证是否随机序列</h3><pre><code>#白噪声检验 lb_pavlue 和 bp_pvalue 值显著小于 0.05，说明不是纯随机序列
from statsmodels.stats.diagnostic import acorr_ljungbox
acorr_ljungbox(train_diff1, lags=1,boxpierce=True)
</code></pre>
<p><img src="https://img-blog.csdnimg.cn/18cd0ab2e9004651a2e4cf1480be700e.png"><br><strong>结果分析</strong>：由白噪声检验可知， p_value 和 lb_value 值显著小于 0.05，因此此序列<strong>不是纯随机序列，因此此序列有研究的意义</strong>，可进行下一步操作。</p>
<h2 id="4-2ACF检验和PACF检验"><a href="#4-2ACF检验和PACF检验" class="headerlink" title="4.2ACF检验和PACF检验"></a>4.2ACF检验和PACF检验</h2><ul>
<li>ACF 是一个完整的自相关函数，可为我们提供具有滞后值的任何序列的自相关值。简单来说，它描述了该序列的当前值与其过去的值之间的相关程度。时间序列可以包含趋势，季节性，周期性和残差等成分。 ACF 在寻找相关性时会考虑所有这些成分。<br>直观上来说， ACF 描述了一个观测值和另一个观测值之间的自相关，包括直接和间接的相关性信息</li>
<li>PACF 是部分自相关函数或者偏自相关函数。基本上，它不是找到像 ACF 这样的滞后与当前的相关性，而是找到残差（在去除了之前的滞后已经解释的影响之后仍然存在）与下一个滞后值的相关性。因此，如果残差中有任何可以由下一个滞后建模的隐藏信息，我们可能会获得良好的相关性，并且在建模时我们会将下一个滞后作为特征。请记住，在建模时，我们不想保留太多相互关联的特征，因为这会产生多重共线性问题。因此，我们只需要保留相关功能。</li>
</ul>
<p>⚫ 采用自相关函数（ACF）、偏自相关函数（PACF） 来判别 ARMA(p,q)模型的系数和阶数。<br>⚫ 自相关函数(ACF)描述时间序列观测值与其过去的观测值之间的线性相关性。<br>⚫ 偏自相关函数(PACF)描述在给定中间观测值的条件下时间序列观测值与其过去的观测值之间的线性相关性</p>
<pre><code>#adf 检验,看图得出移动平均模型阶数 q 值为 2 或 3
fig = plt.figure(figsize=(12, 8))
ax1 = fig.add_subplot(211)
fig = sm.graphics.tsa.plot_acf(train_diff1, lags=16, ax=ax1)
ax1.xaxis.set_ticks_position(&#39;bottom&#39;)
fig.tight_layout()
#pacf 检验，看图得出自回归模型阶数 p 值为 5 或 6
ax2 = fig.add_subplot(212)
fig = sm.graphics.tsa.plot_pacf(train_diff1, lags=16, ax=ax2)
ax2.xaxis.set_ticks_position(&#39;bottom&#39;) fig.tight_layout() plt.show()
</code></pre>
<p><img src="https://img-blog.csdnimg.cn/6cb324c779504719bfd0cc94748381ba.png"><br><img src="https://img-blog.csdnimg.cn/d2759f31845d4d2ba70248ad6cf498ba.png"><br><strong>结果分析</strong>：由 pacf 图像可知， p 值为 5 或 6， acf 图像可知 q 值为 2 或 3，因此 arima 模型的备选参数有四组，分别是（5， 1， 2）、（5， 1， 3）、（6， 1， 2）、（6， 1， 3）四组，接下来使用模型评估方法，选取最下 mse 值得参数进行建模。</p>
<h2 id="4-3AIC准则"><a href="#4-3AIC准则" class="headerlink" title="4.3AIC准则"></a>4.3AIC准则</h2><p>AIC 信息准则即 Akaike information criterion， 是<strong>衡量统计模型拟合优良性</strong>(Goodness oft)的一种标准，由于它为日本统计学家杰池弘欢创立和发展的，因此又称赤池信息量准则。它建立在熵的概念基础上，可以权衡所估计模型的复杂度和此模型拟合数据的优良性。</p>
<pre><code>    #定义 evaluate_arima_model（），输入 X 为历史数据， arima_order 为备选的（p， q）对
    def evaluate_arima_model(X, arima_order):
# 选取数据的前 2/3 作为训练集，后 1/3 作为测试集
train_size = int(len(X) * 0.66)
train, test = X[0:train_size], X[train_size:]
history = [x for x in train]
#通过训练集输出 prediction
predictions = list()
for t in range(len(test)):
model = sm.tsa.arima.ARIMA(history, order=arima_order)
model_fit = model.fit()
yhat = model_fit.forecast()
predictions.append(yhat)
history.append(test[t])
# 将测试集与 prediction 做误差分析，输出误差值
error = mean_squared_error(test, predictions)
return error
</code></pre>
<p>输出结果： 用 AIC 方法得到最优的 p 值是 8,q 值是 8</p>
<h2 id="4-4模型评估"><a href="#4-4模型评估" class="headerlink" title="4.4模型评估"></a>4.4模型评估</h2><pre><code>#将输入数据标准化，便于模型检验
X=preprocessing.scale(train_diff1)
#对三个（p， 1， q）做模型评估，输出误差值 mse，选最小 mse 的参数
mse = evaluate_arima_model(X,(5,1,2))
print(&quot;p=5,d=1,q=2 mse= %.3f&quot; %mse)
mse = evaluate_arima_model(X,(6,1,2))
print(&quot;p=6,d=1,q=2 mse= %.3f&quot; %mse)
mse = evaluate_arima_model(X,(5,1,3))
print(&quot;p=5,d=1,q=3 mse= %.3f&quot; %mse)
mse = evaluate_arima_model(X,(6,1,3))
print(&quot;p=6,d=1,q=3 mse= %.3f&quot; %mse)
mse = evaluate_arima_model(X,(8,1,8))
print(&quot;p=8,d=1,q=8 mse= %.3f&quot; %mse)
</code></pre>
<p><img src="https://img-blog.csdnimg.cn/1f584fac2aa74af9988d48fe747d2955.png"><br>结果分析：通过模型评估得到的五组参数选定值，计算出的 mse，选取得到最小 mse=0.533得（8， 1， 8）参数，选定为 arima 模型得 order 值。</p>
<h2 id="4-5残差检验"><a href="#4-5残差检验" class="headerlink" title="4.5残差检验"></a>4.5残差检验</h2><p>建立模型后，需要对残差序列进行检验。若残差序列为白噪声序列，则说明时间序列中的有用信息已经被提取完毕，剩下的全是随机扰动，是无法预测和使用的，即建模成功，可以进行下一步的预测。</p>
<pre><code>model=sm.tsa.arima.ARIMA(history,order=(8,1,8)).fit()
#产生残差
resid=model.resid
#自相关图
sm.graphics.tsa.plot_acf(resid,lags=15).show()
#偏自相关图
sm.graphics.tsa.plot_pacf(resid,lags=15).show()
#qq 图
qqplot(resid, line=&#39;q&#39;, fit=True).show()
#LB 检验，说明残差序列是白噪声
print(&#39;残差序列的白噪声检验结果为：
&#39;,acorr_ljungbox(resid,lags=1,boxpierce=True))
</code></pre>
<p>残差序列的白噪声检验结果为： lb_stat lb_pvalue bp_stat bp_pvalue<br>1 0.062923 0.801934 0.062499 0.802589</p>
<p><img src="https://img-blog.csdnimg.cn/680b3f6021cd46e9a346ea3e58e14407.png"><br><img src="https://img-blog.csdnimg.cn/019adfcce47e4f549469841c9b906588.png"><br><img src="https://img-blog.csdnimg.cn/cf8c1c5dff3b41ee9664b87099ed462e.png"><br>结果分析：通过残差序列的残差检验可知， p_value 和 lb_value 值都显著大于 0.05，因此表明，残差序列是纯随机序列，即残差序列没有其余信息可以提取，且残差序列符合线性正态分布，因此认为 arima 模型建模预测成功。</p>
<h2 id="4-6模型预测"><a href="#4-6模型预测" class="headerlink" title="4.6模型预测"></a>4.6模型预测</h2><pre><code>#标准化 train_use
X = train_diff1.values
X=preprocessing.scale(X)
train1, test1 = X[0:50], X[51:101]
history = [x for x in train1]
predictions = list()
#使用 ARIMA（8,1,8）进行模型预测
for t in range(len(test1)):
model = sm.tsa.arima.ARIMA(history, order=(8, 1, 8))
model_fit = model.fit()
output = model_fit.forecast()
yhat = output[0]
predictions.append(yhat)
obs = test1[t]
history.append(obs)
#打印 test 和 prediction 的误差
error = mean_squared_error(test, predictions)
print(&#39;Test MSE: %.3f&#39; % error)
</code></pre>
<p><img src="https://img-blog.csdnimg.cn/2884f522eca04d32a3c016a8d5ca77f2.png"></p>
<h2 id="4-7数据可视化"><a href="#4-7数据可视化" class="headerlink" title="4.7数据可视化"></a>4.7数据可视化</h2><pre><code># 画图查看结果
from matplotlib import pyplot
pyplot.figure(figsize=(12,6))
pyplot.plot(test,color=&#39;blue&#39;,label=&quot;实际值&quot;)
pyplot.plot(predictions, color=&#39;red&#39;,label=&quot;预测值&quot;)
pyplot.xlabel(&#39;time&#39;)
pyplot.ylabel(&#39;靠港数&#39;)
pyplot.legend()
pyplot.show()
</code></pre>
<p><img src="https://img-blog.csdnimg.cn/c3289c4856f84523bb56e13c4639ef04.png"></p>
<h1 id="5-结论与展望"><a href="#5-结论与展望" class="headerlink" title="5.结论与展望"></a>5.结论与展望</h1><p>在 2020 年初，新型冠状动脉肺炎大规模爆发。仅在 2020 年 3 月底，新冠肺炎就横扫了213 个国家和地区，在全世界造成 223 万人感染，超过 10 万人死亡。许多国家已经宣布“紧急状态”。由于疫情爆发时许多国家施加的限制和严格控制，国际贸易下降，对国际运输的需求也下降。因此，在冠状肺炎的全球大规模流行的情况下，航运企业将需要对当前环境进行透彻的分析，积极应对并向前迈进。疫情直接导致需求先降后升，而整个物流供应链的成本增加了，伴随着增加了额外的运输和劳动力成本，加上由于大量集装箱船舶长期闲置搁浅，短期内国内外集装箱船舶的运力过剩，还是给航运企业经营带来较大困难。<br>中国出口集装箱运价指数的变动因素可以给疫情下的各大航运企业提供又一条应对思路。通过透彻分析各个港口拥堵程度，燃油价格以及运力指数对集装箱运价之间的关系，航运企业与当地政府之间相互配合下，一定能共渡难关。尽管我国的新冠状肺炎流行已得到基本控制，但要实现有效的全球控制尚需时日。因此，航运企业还应积极解决锁定问题，提高防疫意识，及时了解疫情的演变，并采取多种措施，确保职工在疫情中的稳定性和安全性，克服困难并做出快速响应。</p>
<h1 id="6-参考文献"><a href="#6-参考文献" class="headerlink" title="6.参考文献"></a>6.参考文献</h1><p>[1]王婧妍.浅析新冠疫情的世界性爆发对航运业的影响[J].珠江水运， 2020， 05:82-83.<br>[2].刘娜.大连外贸集装箱运价指数编制研究[D].大连:大连海事大学,2007.<br>[3].王辉.交通运输应对新冠肺炎疫情之策[J].交通运输研究， 2020， 6(01):1.<br>[4].周国光.新冠肺炎疫情防控对交通运输行业的影响及其对策研究[J].交通财会,2020,3:4-7.161616</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://blogzjh.github.io/2022/07/17/%E7%96%AB%E6%83%85%E6%B8%AF%E5%8F%A3%E6%8C%82%E9%9D%A0%E6%95%B0ARIMA%E6%97%B6%E5%BA%8F%E5%88%86%E6%9E%90/" data-id="cl8wvrz9t002tkktaewwn6xvz" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2022/07/17/%E5%8D%B7%E7%A7%AF%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C%E5%8D%95%E5%9B%BE%E8%B6%85%E5%88%86%E8%BE%A8%E7%8E%87%E7%9A%84%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E6%96%B9%E6%B3%95/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          卷积神经网络单图超分辨率的深度学习方法
        
      </div>
    </a>
  
  
    <a href="/2022/07/15/OGNL%E8%A1%A8%E8%BE%BE%E5%BC%8F%E6%94%B9%E9%80%A0%E4%BB%A5%E4%BD%BF%E7%94%A8%E7%B4%A2%E5%BC%95/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">OGNL表达式改造以使用索引</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">分类</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Java/">Java</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E4%B8%AD%E9%97%B4%E4%BB%B6/">中间件</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%B7%A5%E4%BD%9C%E7%AC%94%E8%AE%B0/">工作笔记</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E7%AE%97%E6%B3%95/">数据结构算法</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/">机器学习</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%BA%90%E7%A0%81/">源码</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/HashMap/" rel="tag">HashMap</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/HashMap/" style="font-size: 10px;">HashMap</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/09/">九月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/08/">八月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/07/">七月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/06/">六月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/04/">四月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/03/">三月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/02/">二月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/01/">一月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/12/">十二月 2021</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2022/09/26/%E5%B8%83%E9%9A%86%E8%BF%87%E6%BB%A4%E5%81%9A%E9%BB%91%E5%90%8D%E5%8D%95%E7%9A%84%E6%96%B9%E6%A1%88/">布隆过滤做黑名单的方案</a>
          </li>
        
          <li>
            <a href="/2022/09/15/%E6%9F%90%E8%9A%81%E9%87%91%E6%9C%8D%E7%A7%8B%E6%8B%9B9-15/">某蚁金服秋招9-15</a>
          </li>
        
          <li>
            <a href="/2022/09/15/%E4%B8%89%E7%A7%8D%E6%83%85%E5%86%B5%E7%9A%84%E5%B1%82%E5%BA%8F%E9%81%8D%E5%8E%86/">三种情况的层序遍历</a>
          </li>
        
          <li>
            <a href="/2022/09/15/%E5%87%A0%E9%81%93%E5%B2%9B%E5%B1%BF%E9%97%AE%E9%A2%98-dfs-%E5%89%AA%E6%9E%9D-%E5%9B%9E%E6%BA%AF/">几道岛屿问题:dfs+剪枝+回溯</a>
          </li>
        
          <li>
            <a href="/2022/09/15/%E5%AD%97%E7%AC%A6%E4%B8%B2%EF%BC%9A%E6%9B%BF%E6%8D%A2%E3%80%81%E5%B7%A6%E6%97%8B%E3%80%81%E7%BC%BA%E5%A4%B1/">字符串：替换、左旋、缺失</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2022 张家豪<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>